{% extends "reports/reports_base.html" %}

{% block custom-head %}
<script type="text/javascript" src="/site_media/js/jquery-2.0.3.min.js"></script>
<script type="text/javascript" src="/site_media/js/jquery.tablesorter.min.js"></script>
<link rel="stylesheet" href="/site_media/css/tablesorter_style.css" type="text/css" media="print, projection, screen">

<script>
$(document).ready(function()
	{
		$("#myTable").tablesorter({sortList: [[7,1]]});
	}
);
</script>
{% endblock %}

{% block content %}
<h3>Visa Report</h3>
<p><a href="/reports/visa/map/">Map View</a></p>

<div>
<table id="myTable" class="tablesorter">
<thead>
<tr>
    <th>Booking Date</th>
    <th>Account Head</th>
    <th>Guest Names</th>
    <th>Visa Type</th>
    <th>Country</th>
    <th>Sale</th>
    <th>Purchase</th>
    <th>Profit</th>
    <th>Profit Margin</th>
    <th>Vendor</th>
    <th>Reference</th>
</tr>
</thead>
<tbody>
{% for visa in visas %}
<tr>
    <td>{{ visa.booking_date|date:"b d, Y" }}</td> 
    <td>{{ visa.account_head }}</td> 
    <td>{{ visa.guest_name }}</td> 
    <td>{{ visa.visa_type }}</td> 
    <td>{{ visa.destination_country }}</td>
    <td>{{ visa.sale }}</td>
    <td>{{ visa.purchase }}</td>
    <td>{% widthratio visa.profit 4 1 %}</td>
    <td>{% widthratio visa.profit visa.sale 100 %}%</td>
    <td>{{ visa.vendor }}</td>
    <td>{{ visa.booking_reference }}</td>
</tr> 
{% endfor %}
</tbody>
</table>
</div>
{% endblock %}